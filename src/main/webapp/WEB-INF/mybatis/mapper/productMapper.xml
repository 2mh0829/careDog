<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="store">

	<select id="listProduct" parameterType="map" resultType="care.dog.store.Product">
	SELECT * FROM (
		SELECT ROWNUM rnum, tb.* FROM (
			SELECT productId, productName, imageFilename, sellingPrice, price, amount, 
			isContinued, mileage, p.categoryId, c.categoryName
			FROM product p JOIN productCategory c
				ON p.categoryId = c.categoryId
			ORDER BY productId
	<![CDATA[
			) tb WHERE ROWNUM <= #{end}
		) WHERE rnum >= #{start}
	]]>
	</select>
	
	<!-- 
	<select id="dataCount" parameterType="map" resultType="Integer">
	SELECT NVL(COUNT(*), 0) FROM product p
		JOIN productCategory c
		ON p.categoryId = c.categoryId
	</select>
	 -->
	 
	<select id="dataCount" resultType="Integer">
	SELECT COUNT(*) FROM product
	</select>

</mapper>